{"version":3,"sources":["components/KmlDropzone.js","utils/kml2coordinates.js","components/KmlTrack.js","utils/coordinates2bounds.js","components/LeafletMap.js","utils/coordinates2distance.js","data/BerlinMarathon.js","App.js","index.js"],"names":["KmlDropzone","props","onNewTrackHandler","onNewTrack","onDrop","useCallback","acceptedFiles","forEach","file","reader","FileReader","onabort","console","log","onerror","onload","coordinates","binaryStr","xmlDoc","DOMParser","parseFromString","documentElement","nodeName","getElementsByTagName","item","lineStrings","length","lines","childNodes","nodeValue","trim","split","coord","isNaN","push","kml2coordinates","result","path","readAsText","useDropzone","getRootProps","getInputProps","className","KmlTrack","Polyline","color","this","weight","positions","dashArray","popup","Popup","Component","coordinates2bounds","Array","isArray","Error","bounds","L","latLngBounds","latLng","track","polyline","extend","getBounds","BaseLayer","LayersControl","LeafletMap","state","center","zoom","mapRef","createRef","tracks","map","name","distance","toFixed","hasBounds","current","leafletElement","autofit","checked","Map","ref","position","TileLayer","attribution","url","filter","index","key","point2pointDistance","lat1","lng1","lat2","lng2","p1","Math","PI","p2","angle1","angle2","d","sin","cos","atan2","sqrt","coordinates2distance","sum","reduce","obj","curr","lat","lng","Icon","Default","imagePath","theme","createMuiTheme","palette","primary","main","secondary","App","handleToggleTrack","id","newTracks","undefined","setState","handleRemoveTrack","prev","splice","updateBounds","handleNewTrack","showMoreMenuAnchorEl","handleTrackHover","flag","handleToggleAll","toggle","every","handleOpenMoreMenu","event","currentTarget","handleCloseMoreMenu","handleRemoveSelected","handleRemoveAll","handleTrackOpenMoreMenu","handleTrackCloseMoreMenu","handleToggleSettings","newSettings","settings","handleTrackEditOpen","showEditTrack","currentTrackIdToEdit","handleTrackEditClose","handleTrackEditName","e","target","value","handleTrackEditColor","handleTrackEditDashArray","showSettings","BerlinMarathonData","classes","ThemeProvider","root","CssBaseline","AppBar","appBar","Toolbar","Typography","variant","title","Drawer","drawer","paper","drawerPaper","toolbar","List","dense","ListItem","button","onClick","ListItemText","listItemSubheader","ListItemSecondaryAction","IconButton","edge","Popover","open","Boolean","anchorReference","anchorEl","onClose","anchorOrigin","vertical","horizontal","transformOrigin","MenuList","MenuItem","onMouseEnter","onMouseLeave","ListItemIcon","Checkbox","tabIndex","disableRipple","listItemPrimary","Divider","subheader","ListSubheader","Collapse","in","Switch","onChange","Dialog","aria-labelledby","DialogTitle","DialogContent","TextField","autoFocus","margin","label","type","fullWidth","gutterBottom","Slider","getAriaValueText","toString","valueLabelDisplay","step","marks","min","max","DialogActions","Button","content","leafletMap","withStyles","display","zIndex","flexGrow","width","flexShrink","height","text","fontWeight","typography","fontWeightMedium","overflow","textOverflow","mixins","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.07dd6855.chunk.js","sourcesContent":["import React, { useCallback } from \"react\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport kml2coordinates from \"../utils/kml2coordinates\";\r\n\r\nfunction KmlDropzone(props) {\r\n  const onNewTrackHandler = props.onNewTrack;\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      acceptedFiles.forEach((file) => {\r\n        const reader = new FileReader();\r\n\r\n        reader.onabort = () => console.log(\"file reading was aborted\");\r\n        reader.onerror = () => console.log(\"file reading has failed\");\r\n        reader.onload = () => {\r\n          let coordinates = kml2coordinates(reader.result);\r\n\r\n          if (coordinates.length > 0) {\r\n            onNewTrackHandler(file.path, coordinates);\r\n          }\r\n        };\r\n        reader.readAsText(file);\r\n      });\r\n    },\r\n    [onNewTrackHandler]\r\n  );\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({ onDrop });\r\n\r\n  return (\r\n    <div {...getRootProps({ className: \"dropzone\" })}>\r\n      <input {...getInputProps()} />\r\n      <p>Drag 'n' drop some files here, or click to select files</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default KmlDropzone;\r\n","export default function kml2coordinates(binaryStr) {\r\n  let parser = new DOMParser();\r\n  let xmlDoc = parser.parseFromString(binaryStr, \"text/xml\");\r\n  let coordinates = [];\r\n\r\n  if (xmlDoc.documentElement.nodeName === \"kml\") {\r\n    for (const item of xmlDoc.getElementsByTagName(\"Placemark\")) {\r\n      let lineStrings = item.getElementsByTagName(\"LineString\");\r\n\r\n      if (!lineStrings.length) {\r\n        lineStrings = item.getElementsByTagName(\"Linestring\");\r\n      }\r\n\r\n      for (const lineString of lineStrings) {\r\n        var lines = lineString\r\n          .getElementsByTagName(\"coordinates\")[0]\r\n          .childNodes[0].nodeValue.trim()\r\n          .split(\"\\n\");\r\n        for (const line of lines) {\r\n          let coord = line.split(\",\");\r\n\r\n          if (\r\n            +coord[1] !== 0 &&\r\n            +coord[0] !== 0 &&\r\n            !isNaN(+coord[1]) &&\r\n            !isNaN(+coord[0])\r\n          ) {\r\n            coordinates.push([+coord[1], +coord[0]]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return coordinates;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Polyline, Popup } from \"react-leaflet\";\r\n\r\nexport default class KmlTrack extends Component {\r\n  render() {\r\n    return (\r\n      <Polyline\r\n        color={this.props.color}\r\n        weight={this.props.weight}\r\n        positions={this.props.positions}\r\n        dashArray={this.props.dashArray}\r\n      >\r\n        {this.props.popup && <Popup>{this.props.popup}</Popup>}\r\n      </Polyline>\r\n    );\r\n  }\r\n}\r\n\r\nKmlTrack.propTypes = {\r\n  positions: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.number)).isRequired,\r\n  color: PropTypes.string.isRequired,\r\n  weight: PropTypes.number.isRequired,\r\n  dashArray: PropTypes.number.isRequired,\r\n  popup: PropTypes.oneOfType([PropTypes.string, PropTypes.object])\r\n};\r\n","import L from \"leaflet\";\r\n\r\nexport default function coordinates2bounds(coordinates) {\r\n  if (!Array.isArray(coordinates) || !Array.isArray(coordinates[0])) {\r\n    throw new Error(\"Input argument must be an array of lat/lng pairs.\");\r\n  }\r\n\r\n  if (!Array.isArray(coordinates[0][0])) {\r\n    coordinates = [coordinates];\r\n  }\r\n\r\n  let bounds = L.latLngBounds(\r\n    L.latLng(coordinates[0][0][0], coordinates[0][0][1]),\r\n    L.latLng(coordinates[0][0][0], coordinates[0][0][1])\r\n  );\r\n\r\n  for (let track of coordinates) {\r\n    let polyline = L.polyline(track);\r\n\r\n    bounds.extend(polyline.getBounds());\r\n  }\r\n\r\n  return bounds;\r\n}\r\n","import React, { createRef, Component, Fragment } from \"react\";\r\nimport { LayersControl, Map, TileLayer } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport KmlTrack from \"./KmlTrack\";\r\nimport coordinates2bounds from \"../utils/coordinates2bounds\";\r\n\r\nconst { BaseLayer } = LayersControl;\r\n\r\nclass LeafletMap extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      center: [51.505, -0.09],\r\n      zoom: 13\r\n    };\r\n    this.mapRef = createRef();\r\n  }\r\n\r\n  render() {\r\n    let tracks = this.props.tracks.map((track) => {\r\n      return {\r\n        popup: (\r\n          <Fragment>\r\n            <strong>{track.name}</strong>\r\n            <br />\r\n            {track.distance.toFixed(2)} km\r\n          </Fragment>\r\n        ),\r\n        ...track\r\n      };\r\n    });\r\n\r\n    let bounds = L.latLngBounds([-90, 90], [-180, 180]);\r\n    let hasBounds = false;\r\n\r\n    if (this.mapRef.current != null) {\r\n      bounds = this.mapRef.current.leafletElement.getBounds();\r\n    }\r\n\r\n    if (this.props.autofit) {\r\n      for (let track of this.props.tracks) {\r\n        if (track.checked) {\r\n          if (!hasBounds) {\r\n            hasBounds = true;\r\n            bounds = coordinates2bounds(track.positions);\r\n          } else {\r\n            bounds.extend(coordinates2bounds(track.positions));\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Map bounds={bounds} ref={this.mapRef}>\r\n        <LayersControl position=\"topright\">\r\n          <BaseLayer checked name=\"OpenStreetMap\">\r\n            <TileLayer\r\n              attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n              url=\"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            />\r\n          </BaseLayer>\r\n          <BaseLayer name=\"OpenStreetMap (de)\">\r\n            <TileLayer\r\n              attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n              url=\"//{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png\"\r\n            />\r\n          </BaseLayer>\r\n          <BaseLayer name=\"OpenStreetMap (hot)\">\r\n            <TileLayer\r\n              attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n              url=\"//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png\"\r\n            />\r\n          </BaseLayer>\r\n          <BaseLayer name=\"OpenTopoMap\">\r\n            <TileLayer\r\n              attribution='Map data: &amp;copy <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, <a href=\"http://viewfinderpanoramas.org\">SRTM</a> | Map style: &amp;copy <a href=\"https://opentopomap.org\">OpenTopoMap</a> (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>'\r\n              url=\"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png\"\r\n            />\r\n          </BaseLayer>\r\n          <BaseLayer name=\"HikeBikeMap\">\r\n            <TileLayer\r\n              attribution='&amp;copy <a href=\"http://www.opencyclemap.org\">OpenCycleMap</a>, &amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n              url=\"https://tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png\"\r\n            />\r\n          </BaseLayer>\r\n          <BaseLayer name=\"Hydda\">\r\n            <TileLayer\r\n              attribution='&amp;copy <a href=\"http://openstreetmap.se/\">OpenStreetMap Sweden</a>, &amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n              url=\"//{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png\"\r\n            />\r\n          </BaseLayer>\r\n          <BaseLayer name=\"Carto\">\r\n            <TileLayer\r\n              attribution='Map tiles by <a href=\"http://cartodb.com/attributions\">CartoDB</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a>, &amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n              url=\"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png\"\r\n            />\r\n          </BaseLayer>\r\n          <BaseLayer name=\"EsriSatellite\">\r\n            <TileLayer\r\n              attribution=\"Tiles &amp;copy Esri &amp;mdash Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\"\r\n              url=\"//server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"\r\n            />\r\n          </BaseLayer>\r\n          <BaseLayer name=\"StamenTerrain\">\r\n            <TileLayer\r\n              attribution='Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a>, , &amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n              url=\"//stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png\"\r\n            />\r\n          </BaseLayer>\r\n        </LayersControl>\r\n        {tracks\r\n          .filter((track) => track.checked)\r\n          .map((track, index) => (\r\n            <KmlTrack\r\n              key={track.name}\r\n              color={track.color}\r\n              weight={track.weight}\r\n              positions={track.positions}\r\n              dashArray={track.dashArray}\r\n              popup={track.popup}\r\n            />\r\n          ))}\r\n      </Map>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeafletMap;\r\n","function point2pointDistance(lat1, lng1, lat2, lng2) {\r\n  if (lat1 === lat2 && lng1 === lng2) {\r\n    return 0.0;\r\n  }\r\n\r\n  const earthRadius = 6371.0;\r\n  var p1 = (lat1 * Math.PI) / 180;\r\n  var p2 = (lat2 * Math.PI) / 180;\r\n  var angle1 = ((lat2 - lat1) * Math.PI) / 180;\r\n  var angle2 = ((lng2 - lng1) * Math.PI) / 180;\r\n\r\n  var d =\r\n    Math.sin(angle1 / 2) * Math.sin(angle1 / 2) +\r\n    Math.cos(p1) * Math.cos(p2) * Math.sin(angle2 / 2) * Math.sin(angle2 / 2);\r\n  var final = 2 * Math.atan2(Math.sqrt(d), Math.sqrt(1 - d));\r\n\r\n  return earthRadius * final;\r\n}\r\n\r\nexport default function coordinates2distance(coordinates) {\r\n  if (!Array.isArray(coordinates) || !Array.isArray(coordinates[0])) {\r\n    throw new Error(\"Input argument must be an array of lat/lng pairs.\");\r\n  }\r\n\r\n  if (!Array.isArray(coordinates[0][0])) {\r\n    coordinates = [coordinates];\r\n  }\r\n\r\n  let sum = 0.0;\r\n\r\n  for (let track of coordinates) {\r\n    sum =\r\n      sum +\r\n      track.reduce(\r\n        (obj, curr) => {\r\n          return {\r\n            d: obj.d + point2pointDistance(obj.lat, obj.lng, curr[0], curr[1]),\r\n            lat: curr[0],\r\n            lng: curr[1]\r\n          };\r\n        },\r\n        {\r\n          d: 0.0,\r\n          lat: track[0][0],\r\n          lng: track[0][1]\r\n        }\r\n      ).d;\r\n  }\r\n\r\n  return sum;\r\n}\r\n","export default [\r\n  [52.515124, 13.359583],\r\n  [52.514654, 13.351429],\r\n  [52.51515, 13.350614],\r\n  [52.515176, 13.349884],\r\n  [52.514941, 13.349241],\r\n  [52.514497, 13.348768],\r\n  [52.513296, 13.331645],\r\n  [52.512773, 13.322933],\r\n  [52.513139, 13.322376],\r\n  [52.514549, 13.322333],\r\n  [52.517631, 13.324993],\r\n  [52.52207, 13.328555],\r\n  [52.522201, 13.328512],\r\n  [52.522775, 13.329757],\r\n  [52.523846, 13.329886],\r\n  [52.525125, 13.336967],\r\n  [52.52577800000001, 13.339456],\r\n  [52.522253, 13.36808],\r\n  [52.520765, 13.370655],\r\n  [52.520817, 13.373616000000002],\r\n  [52.522671, 13.37705],\r\n  [52.522175, 13.377436],\r\n  [52.523898, 13.387478],\r\n  [52.527188, 13.387135],\r\n  [52.529407, 13.397520000000002],\r\n  [52.529799, 13.402456],\r\n  [52.529773, 13.4037],\r\n  [52.528572, 13.411124],\r\n  [52.527214, 13.415759],\r\n  [52.52536, 13.420008],\r\n  [52.522096, 13.416661],\r\n  [52.518806000000005, 13.427389],\r\n  [52.518911, 13.428763],\r\n  [52.517709, 13.428076],\r\n  [52.513426, 13.424171],\r\n  [52.512147, 13.422669],\r\n  [52.509639, 13.421295],\r\n  [52.510971, 13.416403],\r\n  [52.501698, 13.409279],\r\n  [52.499164, 13.417648],\r\n  [52.49848500000001, 13.418592],\r\n  [52.48782400000001, 13.425329],\r\n  [52.486308, 13.424042],\r\n  [52.487301, 13.421381000000002],\r\n  [52.489052, 13.408077],\r\n  [52.492188, 13.391255],\r\n  [52.493625, 13.38353],\r\n  [52.491535, 13.376749],\r\n  [52.491535, 13.376688],\r\n  [52.492397, 13.372139],\r\n  [52.493207, 13.368338],\r\n  [52.494331, 13.361171000000002],\r\n  [52.491456, 13.360828],\r\n  [52.490307, 13.359798],\r\n  [52.48981, 13.353189000000002],\r\n  [52.489000000000004, 13.34482],\r\n  [52.480271, 13.344906],\r\n  [52.479017, 13.344649],\r\n  [52.47818, 13.343576],\r\n  [52.47114800000001, 13.334907000000001],\r\n  [52.468796, 13.332761],\r\n  [52.471358, 13.32877],\r\n  [52.471567, 13.324049],\r\n  [52.471619, 13.319672],\r\n  [52.470364, 13.317612],\r\n  [52.469188, 13.31435],\r\n  [52.4689, 13.313363000000003],\r\n  [52.467358, 13.3089],\r\n  [52.468037, 13.30757],\r\n  [52.467645, 13.306454],\r\n  [52.468325, 13.301519],\r\n  [52.468717, 13.298858],\r\n  [52.470364, 13.290404],\r\n  [52.470887, 13.28976],\r\n  [52.470678, 13.288987],\r\n  [52.47365800000001, 13.285211],\r\n  [52.476978, 13.280791],\r\n  [52.480167, 13.286026000000001],\r\n  [52.48129, 13.288387000000002],\r\n  [52.48772, 13.300317],\r\n  [52.488373, 13.301605],\r\n  [52.48819, 13.306325],\r\n  [52.490699, 13.315166],\r\n  [52.4913, 13.312462],\r\n  [52.491953, 13.309501],\r\n  [52.494304, 13.310273],\r\n  [52.498694, 13.312333],\r\n  [52.500523, 13.313192],\r\n  [52.502404, 13.32568],\r\n  [52.504415, 13.334606],\r\n  [52.504546, 13.335636],\r\n  [52.502168000000005, 13.341902],\r\n  [52.501437, 13.342717],\r\n  [52.501489, 13.344219],\r\n  [52.500679, 13.347824],\r\n  [52.499164, 13.353961],\r\n  [52.499086, 13.355463000000002],\r\n  [52.49906, 13.355549],\r\n  [52.497806, 13.362158],\r\n  [52.499687, 13.362802],\r\n  [52.504284, 13.366707],\r\n  [52.505956, 13.368166],\r\n  [52.50815, 13.369711],\r\n  [52.50883, 13.370054],\r\n  [52.509038, 13.371428],\r\n  [52.509613, 13.377093000000002],\r\n  [52.510188, 13.387607],\r\n  [52.510344, 13.391898],\r\n  [52.510762, 13.393744],\r\n  [52.513087000000006, 13.3934],\r\n  [52.514027, 13.3931],\r\n  [52.513949, 13.391426],\r\n  [52.514758, 13.391083],\r\n  [52.514941, 13.389152],\r\n  [52.516978, 13.388723],\r\n  [52.516299, 13.378208000000003],\r\n  [52.515881, 13.371986]\r\n];\r\n","import React, { Component } from \"react\";\n\nimport { createMuiTheme, withStyles } from \"@material-ui/core/styles\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Button from \"@material-ui/core/Button\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Slider from \"@material-ui/core/Slider\";\nimport Switch from \"@material-ui/core/Switch\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\nimport ColorizeIcon from \"@material-ui/icons/Colorize\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\n\nimport KmlDropzone from \"./components/KmlDropzone\";\nimport LeafletMap from \"./components/LeafletMap\";\nimport coordinates2bounds from \"./utils/coordinates2bounds\";\nimport coordinates2distance from \"./utils/coordinates2distance\";\n\nimport BerlinMarathonData from \"./data/BerlinMarathon.js\";\n\nimport \"./styles.css\";\n\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\n\n// TODO: this doesn't work ...\nL.Icon.Default.imagePath =\n  \"//cdnjs.cloudflare.com/ajax/libs/leaflet/1.6.0/images/\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#009374\"\n    },\n    secondary: {\n      main: \"#1f82c0\"\n    }\n  }\n});\n\nconst defaultTrackColor = \"#1f82c0\";\nconst defaultTrackWeight = 3;\nconst defaultTrackStrokeDasharray = 0;\nconst hoverTrackWeight = 5;\nconst drawerWidth = 320;\nconst styles = (theme) => ({\n  root: {\n    display: \"flex\"\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1\n  },\n  title: {\n    flexGrow: 1\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0\n  },\n  drawerPaper: {\n    width: drawerWidth\n  },\n  content: {\n    flexGrow: 1,\n    height: \"100vh\"\n  },\n  listItemSubheader: {\n    color: theme.palette.text.secondary,\n    fontWeight: theme.typography.fontWeightMedium\n  },\n  listItemPrimary: {\n    display: \"block\",\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\"\n  },\n  toolbar: theme.mixins.toolbar,\n  leafletMap: {\n    height: \"calc(100% - 64px)\"\n  }\n});\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      showSettings: true,\n      showMoreMenuAnchorEl: null,\n      showEditTrack: false,\n      currentTrackIdToEdit: null,\n      settings: {\n        autofit: true\n      },\n      tracks: [],\n      center: [51.505, -0.09],\n      zoom: 13\n    };\n  }\n\n  componentDidMount() {\n    this.handleNewTrack(\"Berlin Marathon\", BerlinMarathonData);\n  }\n\n  handleToggleTrack = (id) => () => {\n    let newTracks = this.state.tracks;\n    if (newTracks[id] !== undefined) {\n      newTracks[id].checked = !newTracks[id].checked;\n\n      this.setState({\n        tracks: newTracks\n      });\n    }\n  };\n\n  handleRemoveTrack = (id) => () => {\n    this.setState((prev) => {\n      let newTracks = [...prev.tracks];\n      newTracks.splice(id, 1);\n\n      return {\n        tracks: newTracks\n      };\n    }, this.updateBounds);\n  };\n\n  handleNewTrack = (name, coordinates, color = defaultTrackColor) => {\n    this.setState((prev) => {\n      let newTracks = [...prev.tracks];\n      newTracks.push({\n        name: name,\n        positions: coordinates,\n        checked: true,\n        color: color,\n        weight: defaultTrackWeight,\n        dashArray: defaultTrackStrokeDasharray,\n        distance: coordinates2distance(coordinates),\n        bounds: coordinates2bounds(coordinates),\n        showMoreMenuAnchorEl: null\n      });\n\n      return {\n        tracks: newTracks\n      };\n    }, this.updateBounds);\n  };\n\n  handleTrackHover = (id, flag) => () => {\n    let newTracks = this.state.tracks;\n    if (newTracks[id] !== undefined) {\n      newTracks[id].weight = flag ? hoverTrackWeight : defaultTrackWeight;\n\n      this.setState({\n        tracks: newTracks\n      });\n    }\n  };\n\n  handleToggleAll = () => {\n    let newTracks = this.state.tracks;\n    let toggle = newTracks.every((track) => track.checked);\n\n    for (let track of newTracks) {\n      track.checked = !toggle;\n    }\n\n    this.setState({\n      tracks: newTracks\n    });\n  };\n\n  handleOpenMoreMenu = (event) => {\n    this.setState({\n      showMoreMenuAnchorEl: event.currentTarget\n    });\n  };\n\n  handleCloseMoreMenu = () => {\n    this.setState({\n      showMoreMenuAnchorEl: null\n    });\n  };\n\n  handleRemoveSelected = () => {\n    let newTracks = this.state.tracks.filter((track) => !track.checked);\n\n    this.setState({\n      tracks: newTracks\n    });\n  };\n\n  handleRemoveAll = () => {\n    this.setState({\n      tracks: []\n    });\n  };\n\n  handleTrackOpenMoreMenu = (id) => (event) => {\n    let newTracks = this.state.tracks;\n    if (newTracks[id] !== undefined) {\n      newTracks[id].showMoreMenuAnchorEl = event.currentTarget;\n\n      this.setState({\n        tracks: newTracks\n      });\n    }\n  };\n\n  handleTrackCloseMoreMenu = (id) => () => {\n    let newTracks = this.state.tracks;\n    if (newTracks[id] !== undefined) {\n      newTracks[id].showMoreMenuAnchorEl = null;\n\n      this.setState({\n        tracks: newTracks\n      });\n    }\n  };\n\n  handleToggleSettings = (name) => () => {\n    let newSettings = this.state.settings;\n    newSettings[name] = !this.state.settings[name];\n\n    this.setState((prev) => {\n      return {\n        settings: newSettings\n      };\n    });\n  };\n\n  handleTrackEditOpen = (id) => () => {\n    this.setState({\n      showEditTrack: true,\n      currentTrackIdToEdit: id\n    });\n  };\n\n  handleTrackEditClose = () => {\n    let newTracks = this.state.tracks;\n    newTracks[this.state.currentTrackIdToEdit].showMoreMenuAnchorEl = null;\n\n    this.setState({\n      showEditTrack: false,\n      currentTrackIdToEdit: null,\n      tracks: newTracks\n    });\n  };\n\n  handleTrackEditName = (e) => {\n    let newTracks = this.state.tracks;\n    if (newTracks[this.state.currentTrackIdToEdit] !== undefined) {\n      newTracks[this.state.currentTrackIdToEdit].name = e.target.value;\n\n      this.setState({\n        tracks: newTracks\n      });\n    }\n  };\n\n  handleTrackEditColor = (e) => {\n    let newTracks = this.state.tracks;\n    if (newTracks[this.state.currentTrackIdToEdit] !== undefined) {\n      newTracks[this.state.currentTrackIdToEdit].color = e.target.value;\n\n      this.setState({\n        tracks: newTracks\n      });\n    }\n  };\n\n  handleTrackEditDashArray = (e, value) => {\n    let newTracks = this.state.tracks;\n    if (newTracks[this.state.currentTrackIdToEdit] !== undefined) {\n      newTracks[this.state.currentTrackIdToEdit].dashArray = value;\n\n      this.setState({\n        tracks: newTracks\n      });\n    }\n  };\n\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <ThemeProvider theme={theme}>\n        <div className={classes.root}>\n          defaultTrackStrokeDasharray\n          <CssBaseline />\n          <AppBar position=\"fixed\" className={classes.appBar}>\n            <Toolbar>\n              <Typography variant=\"h6\" className={classes.title}>\n                KML Viewer\n              </Typography>\n            </Toolbar>\n          </AppBar>\n          <Drawer\n            className={classes.drawer}\n            variant=\"permanent\"\n            classes={{\n              paper: classes.drawerPaper\n            }}\n          >\n            <div className={classes.toolbar} />\n            <List dense>\n              <ListItem button onClick={this.handleToggleAll}>\n                <ListItemText\n                  classes={{ primary: classes.listItemSubheader }}\n                  primary=\"Files\"\n                />\n                <ListItemSecondaryAction>\n                  <IconButton edge=\"end\" onClick={this.handleOpenMoreMenu}>\n                    <MoreVertIcon />\n                  </IconButton>\n                  <Popover\n                    open={Boolean(this.state.showMoreMenuAnchorEl)}\n                    anchorReference=\"anchorEl\"\n                    anchorEl={this.state.showMoreMenuAnchorEl}\n                    onClose={this.handleCloseMoreMenu}\n                    anchorOrigin={{\n                      vertical: \"bottom\",\n                      horizontal: \"center\"\n                    }}\n                    transformOrigin={{\n                      vertical: \"top\",\n                      horizontal: \"center\"\n                    }}\n                  >\n                    <MenuList>\n                      <MenuItem button onClick={this.handleRemoveSelected}>\n                        Remove selected\n                      </MenuItem>\n                      <MenuItem button onClick={this.handleRemoveAll}>\n                        Remove all\n                      </MenuItem>\n                    </MenuList>\n                  </Popover>\n                </ListItemSecondaryAction>\n              </ListItem>\n              {this.state.tracks.map((track, index) => (\n                <ListItem\n                  button\n                  key={track.name}\n                  onClick={this.handleToggleTrack(index)}\n                  onMouseEnter={this.handleTrackHover(index, true)}\n                  onMouseLeave={this.handleTrackHover(index, false)}\n                >\n                  <ListItemIcon>\n                    <Checkbox\n                      edge=\"start\"\n                      checked={track.checked}\n                      tabIndex={-1}\n                      disableRipple\n                    />\n                  </ListItemIcon>\n                  <ListItemText\n                    classes={{ primary: classes.listItemPrimary }}\n                    primary={track.name}\n                    secondary={\n                      track.checked ? track.distance.toFixed(2) + \" km\" : \"\"\n                    }\n                  />\n                  <ListItemSecondaryAction>\n                    <IconButton\n                      edge=\"end\"\n                      onClick={this.handleTrackOpenMoreMenu(index)}\n                    >\n                      <MoreVertIcon />\n                    </IconButton>\n                    <Popover\n                      open={Boolean(track.showMoreMenuAnchorEl)}\n                      anchorReference=\"anchorEl\"\n                      anchorEl={track.showMoreMenuAnchorEl}\n                      onClose={this.handleTrackCloseMoreMenu(index)}\n                      anchorOrigin={{\n                        vertical: \"bottom\",\n                        horizontal: \"center\"\n                      }}\n                      transformOrigin={{\n                        vertical: \"top\",\n                        horizontal: \"center\"\n                      }}\n                    >\n                      <MenuList>\n                        <MenuItem\n                          button\n                          onClick={this.handleTrackEditOpen(index)}\n                        >\n                          <ListItemIcon>\n                            <ColorizeIcon />\n                          </ListItemIcon>\n                          <ListItemText>Edit</ListItemText>\n                        </MenuItem>\n                        <MenuItem\n                          button\n                          onClick={this.handleRemoveTrack(index)}\n                        >\n                          <ListItemIcon>\n                            <DeleteIcon />\n                          </ListItemIcon>\n                          <ListItemText>Remove</ListItemText>\n                        </MenuItem>\n                      </MenuList>\n                    </Popover>\n                  </ListItemSecondaryAction>\n                </ListItem>\n              ))}\n              <ListItem>\n                <KmlDropzone onNewTrack={this.handleNewTrack} />\n              </ListItem>\n            </List>\n            <Divider />\n            <List subheader={<ListSubheader>Settings</ListSubheader>} dense>\n              <Collapse in={this.state.showSettings}>\n                <ListItem>\n                  <ListItemText\n                    classes={{ primary: classes.listItemPrimary }}\n                    primary=\"Autofit\"\n                  />\n                  <Switch\n                    edge=\"end\"\n                    checked={this.state.settings.autofit}\n                    onChange={this.handleToggleSettings(\"autofit\")}\n                  />\n                </ListItem>\n              </Collapse>\n            </List>\n          </Drawer>\n          <Dialog\n            open={this.state.showEditTrack}\n            onClose={this.handleTrackEditClose}\n            aria-labelledby=\"form-dialog-title\"\n          >\n            <DialogTitle id=\"form-dialog-title\">\n              {this.state.tracks[this.state.currentTrackIdToEdit]?.name}\n            </DialogTitle>\n            <DialogContent>\n              <TextField\n                autoFocus\n                margin=\"dense\"\n                id=\"name\"\n                label=\"Name\"\n                type=\"text\"\n                value={this.state.tracks[this.state.currentTrackIdToEdit]?.name}\n                onChange={this.handleTrackEditName}\n                fullWidth\n              />\n              <TextField\n                autoFocus\n                margin=\"dense\"\n                id=\"color\"\n                label=\"Color\"\n                type=\"text\"\n                value={\n                  this.state.tracks[this.state.currentTrackIdToEdit]?.color\n                }\n                onChange={this.handleTrackEditColor}\n                fullWidth\n              />\n              <Typography id=\"track-dasharray-slider\" gutterBottom>\n                Dash array\n              </Typography>\n              <Slider\n                value={\n                  this.state.tracks[this.state.currentTrackIdToEdit]?.dashArray\n                }\n                onChange={this.handleTrackEditDashArray}\n                getAriaValueText={(d) => d.toString()}\n                aria-labelledby=\"track-dasharray-slider\"\n                valueLabelDisplay=\"auto\"\n                step={1}\n                marks\n                min={0}\n                max={10}\n              />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={this.handleTrackEditClose} color=\"primary\">\n                Close\n              </Button>\n            </DialogActions>\n          </Dialog>\n          <main className={classes.content}>\n            <div className={classes.toolbar} />\n            <div className={classes.leafletMap}>\n              <LeafletMap\n                tracks={this.state.tracks}\n                autofit={this.state.settings.autofit}\n              />\n            </div>\n          </main>\n        </div>\n      </ThemeProvider>\n    );\n  }\n}\n\nexport default withStyles(styles)(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}